{% extends 'base.html' %}
{% block title %}Students - {{ class_level }}{% endblock %}

{% block topbar %}
<div class="brand">
    <span class="brand-mark">C</span>
    <div class="brand-text">
        <strong>CEMS</strong>
        <small>Students for {{ class_level }}</small>
    </div>
</div>
<div class="top-actions">
    <div class="status-dot online"></div>
    <span class="status-label">Logged in as {{ request.user.username }}</span>
    <div class="chip">Teacher</div>
    <a class="btn ghost" href="{% url 'academics:teacher_dashboard' %}">Back to dashboard</a>
</div>
{% endblock %}

{% block sidebar %}
<div class="sidebar-group">
    <p class="sidebar-label">Class</p>
    <nav class="menu">
        <a href="{% url 'academics:teacher_dashboard' %}" class="menu-link">Dashboard</a>
        <a href="#" class="menu-link active">Students</a>
        <a href="{% url 'academics:teacher_class_subjects' class_level.id %}" class="menu-link">Subjects</a>
    </nav>
</div>
{% endblock %}

{% block content %}
<section class="section">
    <div class="section-header">
        <div>
            <p class="eyebrow">Class roster</p>
            <h2>{{ class_level }}</h2>
        </div>
        <div class="hint">Academic year: {{ class_level.academic_year }}</div>
    </div>
    <div class="card">
        <div class="table-scroll">
            <table class="table compact">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>ID</th>
                        <th>Roll</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for enrollment in enrollments %}
                    <tr>
                        <td>{{ enrollment.student.user.get_full_name|default:enrollment.student.user.username }}</td>
                        <td>{{ enrollment.student.student_id|default:"N/A" }}</td>
                        <td>{{ enrollment.roll_number|default:"-" }}</td>
                        <td><span class="tag success">{{ enrollment.get_status_display }}</span></td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="4" class="muted">No students enrolled yet.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}
